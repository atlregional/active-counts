<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>ARC Bike Counts</title>
	<script src="bower_components/jquery/dist/jquery.min.js"></script>
	<script src="bower_components/tabletop/src/tabletop.js"></script>
	<script src="bower_components/sheetsee/js/sheetsee.js"></script>
	<script src="bower_components/moment/min/moment.min.js"></script>

	<link rel='stylesheet' type='text/css' href='http://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.css'  />
	<link rel="stylesheet" type="text/css" href="bower_components/weather-icons/css/weather-icons.min.css">
	<style type="text/css">
		#map, #shapesmap {max-width: 800px; height: 500px;}
	    .leaflet-popup-content li {list-style:none;}
	    .leaflet-popup-content {width: 102px;}
	    .leaflet-popup-content img {width: 100px;}
	    a {border: none;}
	</style>
</head>
<body>
<p>
	<em><a href="https://docs.google.com/spreadsheets/d/1eKo4ssv5EKQRS25qfeXQqIJOjoiJ_-Cg1krMylsEIdI/edit?usp=sharing" target="_blank">spreadsheet</a></em>
	<i class="wi wi-day-lightning"></i>
	<i class="wi wi-night-alt-snow"></i>
<p>

<div id="map"></div>
<script type="text/javascript">
	// https://docs.google.com/spreadsheets/d/1eKo4ssv5EKQRS25qfeXQqIJOjoiJ_-Cg1krMylsEIdI/edit?usp=sharing
	document.addEventListener('DOMContentLoaded', function() {
        var URL = "1eKo4ssv5EKQRS25qfeXQqIJOjoiJ_-Cg1krMylsEIdI"
        Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true } )
        // Tabletop.init( { key: URL2, callback: shapesMap, simpleSheet: true } )
      })

      function showInfo(data) {
      	console.log(data);
        var optionsJSON = ["Description", "Technology", "CntIinterval1"]
        var template = "<ul>"
                     + "<li>{{Technology}}</li>"
                     + "<li>Count = {{CntIinterval1}}</li>"
                     + "<li><h4>{{Description}}</h4></li></ul>"
        var geoJSON = Sheetsee.createGeoJSON(data, optionsJSON)
        console.log(geoJSON);
        var map = Sheetsee.loadMap("map")
        Sheetsee.addTileLayer(map, 'examples.map-20v6611k')
        Sheetsee.addMarkerLayer(geoJSON, map, template)
      }
</script>
<script>
  var callbackFunction = function(data) {
    var results = data.query.results;
    console.log(results);
  };
</script>

<script src="https://query.yahooapis.com/v1/public/yql?q=select wind from weather.forecast where woeid in (select woeid from geo.places(1) where text='atlanta, ga')&format=json&callback=callbackFunction"></script>
</body>

</html>